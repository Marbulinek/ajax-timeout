/* 
 * jQuery Ajax Timeout 
 * 
 * Copyright (c) 2019 Lukas Caniga 
 * 
 * Licensed under the MIT license: 
 * http://www.opensource.org/licenses/mit-license.php 
 * 
 * Project home: 
 * https://github.com/Marbulinek/ajax-timeout 
 * 
 * Version: 1.0 
 * 
 */ 
!function(n){n.ajaxTimeout=function(o){var e=null,l=n.extend({type:"POST",url:"example.com/apiEndPoint",data:{},timeout:18e4,logEnabled:!1,browserTimeout:0,onSuccess:function(o){console.log(o)},onError:function(o){console.log(o)}},o);function t(o,n){null!=e&&(clearTimeout(e),e=null),e=setTimeout(function(){l.logEnabled&&console.log("Closing connection!"+e),o.responseText="timeout",o.abort()},n)}n.ajax({type:l.type,url:l.url,data:l.data,timeout:l.browserTimeout,success:function(o){l.onSuccess(o)},error:function(o){l.onError(o)},xhr:function(){var n=new window.XMLHttpRequest;return n.upload.onprogress=function(o){l.logEnabled&&console.log("Upload: "+Math.round(o.loaded/o.total*100)+"%"),t(n,l.timeout)},n.onprogress=function(o){l.logEnabled&&console.log("Download: "+Math.round(o.loaded/o.total*100)+"%"),t(n,l.timeout)},n.upload.onload=function(){l.logEnabled&&console.log("Upload completed!")},n.onload=function(){l.logEnabled&&console.log("Download completed!")},n.upload.onloadend=function(){clearTimeout(e)},n.onloadend=function(){clearTimeout(e)},n}})}}(jQuery);